<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Transmission â€“ Message cryptÃ©</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="intro">
    <p id="introText">Connexion au canal 404Î”...<br><small>(Appuyez pour activer)</small></p>
    <div class="glitch-lines"></div>
  </div>

  <h1 id="title" style="opacity:0;">Canal 404Î” â€“ Message cryptÃ©</h1>

  <div class="player-container" id="mainContent" style="opacity:0;">
    <p>DÃ©cryptage en coursâ€¦</p>
    <div id="transmissionText" class="terminal"></div>
  </div>

  <div class="footer">Bureau de Sauvegarde Temporelle â€“ 2050</div>

  <script>
// === CONFIG ===
// ðŸ“Œ Ton numÃ©ro WhatsApp
const PHONE = "+33668666240";
// ðŸ“Œ Ta clÃ© CallMeBot
const APIKEY = "8941906";

// === Description lisible du fragment ===
// âš ï¸ A personnaliser pour chaque fichier
const fragment = "Fragment 4 (anniv cÃ©cile)";

// === DÃ©tection de lâ€™Ã©quipe via l'URL ===
// (ex : .../fragment.html?team=A)
const params = new URLSearchParams(window.location.search);
const team = params.get("team") || "UNKNOWN";

// === Envoi WhatsApp via ton Worker ===
if (team !== "UNKNOWN") {

    const msg = encodeURIComponent(
        `TEAM ${team} a trouvÃ© ${fragment}`
    );

    // âš ï¸ Attention : PHONE / APIKEY = majuscules, comme dÃ©finis plus haut
    fetch(`https://damp-meadow-3b23.stephane-btn.workers.dev?phone=${PHONE}&apikey=${APIKEY}&text=${msg}`)
        .catch(()=>{ /* on ignore les erreurs CORS, normal */ });
}


    const intro = document.getElementById('intro');
    const mainContent = document.getElementById('mainContent');
    const title = document.getElementById('title');
    const textContainer = document.getElementById('transmissionText');
    const message = "Bonjour Agent Ziva. En ce 20 novembre 2025 toute l'agence vous souhaite un bon anniversaire. Vous avez recu un nouveaut mot clÃ© : ANNIVERSAIRE";

    intro.addEventListener("click", () => {
      intro.style.opacity = 0;
      setTimeout(() => { intro.style.display = "none"; }, 1000);
      title.style.transition = "opacity 1s";
      mainContent.style.transition = "opacity 1s";
      title.style.opacity = 1;
      mainContent.style.opacity = 1;
      typeWriterEffect(message);
    });

    function typeWriterEffect(text) {
      let i = 0;
      textContainer.textContent = "";
      const interval = setInterval(() => {
        textContainer.textContent += text[i];
        i++;
        if (i >= text.length) clearInterval(interval);
      }, 40);
    }
  </script>
</body>
</html>
